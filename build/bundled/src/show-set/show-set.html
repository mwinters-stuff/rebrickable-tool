<html><head><meta charset="UTF-8"><link rel="import" href="../main-app/main-app.html"></head><body><div hidden="" by-vulcanize=""><dom-module id="neon-animated-pages" assetpath="../../bower_components/neon-animation/">

  <style>:host{display:block;position:relative;}:host > ::content > *{position:absolute;top:0;left:0;bottom:0;right:0;}:host > ::content > :not(.iron-selected):not(.neon-animating){display:none !important;}:host > ::content > .neon-animating{pointer-events:none;}</style>

  <template>
    <content id="content"></content>
  </template>

</dom-module>

<script>!function(){Polymer({is:"neon-animated-pages",behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{activateEvent:{type:String,value:""},animateInitialSelection:{type:Boolean,value:!1}},listeners:{"iron-select":"_onIronSelect","neon-animation-finish":"_onNeonAnimationFinish"},_onIronSelect:function(i){var e=i.detail.item;if(!(this.items.indexOf(e)<0)){var t=this._valueToItem(this._prevSelected)||!1;if(this._prevSelected=this.selected,!t&&!this.animateInitialSelection)return void this._completeSelectedChanged();this.animationConfig=[],this.entryAnimation?this.animationConfig.push({name:this.entryAnimation,node:e}):e.getAnimationConfig&&this.animationConfig.push({animatable:e,type:"entry"}),t&&(t.classList.contains("neon-animating")&&(this._squelchNextFinishEvent=!0,this.cancelAnimation(),this._completeSelectedChanged(),this._squelchNextFinishEvent=!1),this.exitAnimation?this.animationConfig.push({name:this.exitAnimation,node:t}):t.getAnimationConfig&&this.animationConfig.push({animatable:t,type:"exit"}),t.classList.add("neon-animating")),e.classList.add("neon-animating"),this.animationConfig.length>=1?this.isAttached?this.playAnimation(void 0,{fromPage:t,toPage:e}):this.async(function(){this.playAnimation(void 0,{fromPage:null,toPage:e})}):this._completeSelectedChanged(t,e)}},_completeSelectedChanged:function(i,e){if(e&&e.classList.remove("neon-animating"),i&&i.classList.remove("neon-animating"),!e||!i)for(var t,n=Polymer.dom(this.$.content).getDistributedNodes(),a=0;t=n[a];a++)t.classList&&t.classList.remove("neon-animating");this.async(this._notifyPageResize)},_onNeonAnimationFinish:function(i){return this._squelchNextFinishEvent?void(this._squelchNextFinishEvent=!1):void this._completeSelectedChanged(i.detail.fromPage,i.detail.toPage)},_notifyPageResize:function(){var i=this.selectedItem||this._valueToItem(this.selected);this.resizerShouldNotify=function(e){return e==i},this.notifyResize()}})}();</script>
<iron-iconset-svg name="paper-tabs" size="24">
<svg><defs>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g>
</defs></svg>
</iron-iconset-svg>
<dom-module id="paper-tab" assetpath="../../bower_components/paper-tabs/">
  <template>
    <style>:host{@apply (--layout-inline);@apply (--layout-center);@apply (--layout-center-justified);@apply (--layout-flex-auto);position:relative;padding:0 12px;overflow:hidden;cursor:pointer;vertical-align:middle;@apply (--paper-font-common-base);@apply (--paper-tab);}:host(:focus){outline:none;}:host([link]){padding:0;}.tab-content{height:100%;transform:translateZ(0);-webkit-transform:translateZ(0);transition:opacity 0.1s cubic-bezier(0.4, 0.0, 1, 1);@apply (--layout-horizontal);@apply (--layout-center-center);@apply (--layout-flex-auto);@apply (--paper-tab-content);}:host(:not(.iron-selected)) > .tab-content{opacity:0.8;@apply (--paper-tab-content-unselected);}:host(:focus) .tab-content{opacity:1;font-weight:700;}paper-ripple{color:var(--paper-tab-ink, --paper-yellow-a100);}.tab-content > ::content > a{@apply (--layout-flex-auto);height:100%;}</style>

    <div class="tab-content">
      <content></content>
    </div>
  </template>

  <script>Polymer({is:"paper-tab",behaviors:[Polymer.IronControlState,Polymer.IronButtonState,Polymer.PaperRippleBehavior],properties:{link:{type:Boolean,value:!1,reflectToAttribute:!0}},hostAttributes:{role:"tab"},listeners:{down:"_updateNoink",tap:"_onTap"},attached:function(){this._updateNoink()},get _parentNoink(){var t=Polymer.dom(this).parentNode;return!!t&&!!t.noink},_updateNoink:function(){this.noink=!!this.noink||!!this._parentNoink},_onTap:function(t){if(this.link){var e=this.queryEffectiveChildren("a");if(!e)return;if(t.target===e)return;e.click()}}});</script>
</dom-module>
<dom-module id="paper-tabs" assetpath="../../bower_components/paper-tabs/">
  <template>
    <style>:host{@apply (--layout);@apply (--layout-center);height:48px;font-size:14px;font-weight:500;overflow:hidden;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;@apply (--paper-tabs);}:host-context([dir=rtl]){@apply (--layout-horizontal-reverse);}#tabsContainer{position:relative;height:100%;white-space:nowrap;overflow:hidden;@apply (--layout-flex-auto);}#tabsContent{height:100%;-moz-flex-basis:auto;-ms-flex-basis:auto;flex-basis:auto;}#tabsContent.scrollable{position:absolute;white-space:nowrap;}#tabsContent:not(.scrollable),
      #tabsContent.scrollable.fit-container{@apply (--layout-horizontal);}#tabsContent.scrollable.fit-container{min-width:100%;}#tabsContent.scrollable.fit-container > ::content > *{-ms-flex:1 0 auto;-webkit-flex:1 0 auto;flex:1 0 auto;}.hidden{display:none;}.not-visible{opacity:0;cursor:default;}paper-icon-button{width:48px;height:48px;padding:12px;margin:0 4px;}#selectionBar{position:absolute;height:2px;bottom:0;left:0;right:0;background-color:var(--paper-tabs-selection-bar-color, --paper-yellow-a100);-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:left center;transform-origin:left center;transition:-webkit-transform;transition:transform;@apply (--paper-tabs-selection-bar);}#selectionBar.align-bottom{top:0;bottom:auto;}#selectionBar.expand{transition-duration:0.15s;transition-timing-function:cubic-bezier(0.4, 0.0, 1, 1);}#selectionBar.contract{transition-duration:0.18s;transition-timing-function:cubic-bezier(0.0, 0.0, 0.2, 1);}#tabsContent > ::content > *:not(#selectionBar){height:100%;}</style>

    <paper-icon-button icon="paper-tabs:chevron-left" class$="[[_computeScrollButtonClass(_leftHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onLeftScrollButtonDown" tabindex="-1"></paper-icon-button>

    <div id="tabsContainer" on-track="_scroll" on-down="_down">
      <div id="tabsContent" class$="[[_computeTabsContentClass(scrollable, fitContainer)]]">
        <div id="selectionBar" class$="[[_computeSelectionBarClass(noBar, alignBottom)]]" on-transitionend="_onBarTransitionEnd"></div>
        <content select="*"></content>
      </div>
    </div>

    <paper-icon-button icon="paper-tabs:chevron-right" class$="[[_computeScrollButtonClass(_rightHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onRightScrollButtonDown" tabindex="-1"></paper-icon-button>

  </template>

  <script>Polymer({is:"paper-tabs",behaviors:[Polymer.IronResizableBehavior,Polymer.IronMenubarBehavior],properties:{noink:{type:Boolean,value:!1,observer:"_noinkChanged"},noBar:{type:Boolean,value:!1},noSlide:{type:Boolean,value:!1},scrollable:{type:Boolean,value:!1},fitContainer:{type:Boolean,value:!1},disableDrag:{type:Boolean,value:!1},hideScrollButtons:{type:Boolean,value:!1},alignBottom:{type:Boolean,value:!1},selectable:{type:String,value:"paper-tab"},autoselect:{type:Boolean,value:!1},autoselectDelay:{type:Number,value:0},_step:{type:Number,value:10},_holdDelay:{type:Number,value:1},_leftHidden:{type:Boolean,value:!1},_rightHidden:{type:Boolean,value:!1},_previousTab:{type:Object}},hostAttributes:{role:"tablist"},listeners:{"iron-resize":"_onTabSizingChanged","iron-items-changed":"_onTabSizingChanged","iron-select":"_onIronSelect","iron-deselect":"_onIronDeselect"},keyBindings:{"left:keyup right:keyup":"_onArrowKeyup"},created:function(){this._holdJob=null,this._pendingActivationItem=void 0,this._pendingActivationTimeout=void 0,this._bindDelayedActivationHandler=this._delayedActivationHandler.bind(this),this.addEventListener("blur",this._onBlurCapture.bind(this),!0)},ready:function(){this.setScrollDirection("y",this.$.tabsContainer)},detached:function(){this._cancelPendingActivation()},_noinkChanged:function(t){var e=Polymer.dom(this).querySelectorAll("paper-tab");e.forEach(t?this._setNoinkAttribute:this._removeNoinkAttribute)},_setNoinkAttribute:function(t){t.setAttribute("noink","")},_removeNoinkAttribute:function(t){t.removeAttribute("noink")},_computeScrollButtonClass:function(t,e,i){return!e||i?"hidden":t?"not-visible":""},_computeTabsContentClass:function(t,e){return t?"scrollable"+(e?" fit-container":""):" fit-container"},_computeSelectionBarClass:function(t,e){return t?"hidden":e?"align-bottom":""},_onTabSizingChanged:function(){this.debounce("_onTabSizingChanged",function(){this._scroll(),this._tabChanged(this.selectedItem)},10)},_onIronSelect:function(t){this._tabChanged(t.detail.item,this._previousTab),this._previousTab=t.detail.item,this.cancelDebouncer("tab-changed")},_onIronDeselect:function(t){this.debounce("tab-changed",function(){this._tabChanged(null,this._previousTab),this._previousTab=null},1)},_activateHandler:function(){this._cancelPendingActivation(),Polymer.IronMenuBehaviorImpl._activateHandler.apply(this,arguments)},_scheduleActivation:function(t,e){this._pendingActivationItem=t,this._pendingActivationTimeout=this.async(this._bindDelayedActivationHandler,e)},_delayedActivationHandler:function(){var t=this._pendingActivationItem;this._pendingActivationItem=void 0,this._pendingActivationTimeout=void 0,t.fire(this.activateEvent,null,{bubbles:!0,cancelable:!0})},_cancelPendingActivation:function(){void 0!==this._pendingActivationTimeout&&(this.cancelAsync(this._pendingActivationTimeout),this._pendingActivationItem=void 0,this._pendingActivationTimeout=void 0)},_onArrowKeyup:function(t){this.autoselect&&this._scheduleActivation(this.focusedItem,this.autoselectDelay)},_onBlurCapture:function(t){t.target===this._pendingActivationItem&&this._cancelPendingActivation()},get _tabContainerScrollSize(){return Math.max(0,this.$.tabsContainer.scrollWidth-this.$.tabsContainer.offsetWidth)},_scroll:function(t,e){if(this.scrollable){var i=e&&-e.ddx||0;this._affectScroll(i)}},_down:function(t){this.async(function(){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null)},1)},_affectScroll:function(t){this.$.tabsContainer.scrollLeft+=t;var e=this.$.tabsContainer.scrollLeft;this._leftHidden=0===e,this._rightHidden=e===this._tabContainerScrollSize},_onLeftScrollButtonDown:function(){this._scrollToLeft(),this._holdJob=setInterval(this._scrollToLeft.bind(this),this._holdDelay)},_onRightScrollButtonDown:function(){this._scrollToRight(),this._holdJob=setInterval(this._scrollToRight.bind(this),this._holdDelay)},_onScrollButtonUp:function(){clearInterval(this._holdJob),this._holdJob=null},_scrollToLeft:function(){this._affectScroll(-this._step)},_scrollToRight:function(){this._affectScroll(this._step)},_tabChanged:function(t,e){if(!t)return this.$.selectionBar.classList.remove("expand"),this.$.selectionBar.classList.remove("contract"),void this._positionBar(0,0);var i=this.$.tabsContent.getBoundingClientRect(),n=i.width,o=t.getBoundingClientRect(),s=o.left-i.left;if(this._pos={width:this._calcPercent(o.width,n),left:this._calcPercent(s,n)},this.noSlide||null==e)return this.$.selectionBar.classList.remove("expand"),this.$.selectionBar.classList.remove("contract"),void this._positionBar(this._pos.width,this._pos.left);var a=e.getBoundingClientRect(),l=this.items.indexOf(e),c=this.items.indexOf(t),r=5;this.$.selectionBar.classList.add("expand");var h=c>l,d=this._isRTL;d&&(h=!h),h?this._positionBar(this._calcPercent(o.left+o.width-a.left,n)-r,this._left):this._positionBar(this._calcPercent(a.left+a.width-o.left,n)-r,this._calcPercent(s,n)+r),this.scrollable&&this._scrollToSelectedIfNeeded(o.width,s)},_scrollToSelectedIfNeeded:function(t,e){var i=e-this.$.tabsContainer.scrollLeft;0>i?this.$.tabsContainer.scrollLeft+=i:(i+=t-this.$.tabsContainer.offsetWidth,i>0&&(this.$.tabsContainer.scrollLeft+=i))},_calcPercent:function(t,e){return 100*t/e},_positionBar:function(t,e){t=t||0,e=e||0,this._width=t,this._left=e,this.transform("translateX("+e+"%) scaleX("+t/100+")",this.$.selectionBar)},_onBarTransitionEnd:function(t){var e=this.$.selectionBar.classList;e.contains("expand")?(e.remove("expand"),e.add("contract"),this._positionBar(this._pos.width,this._pos.left)):e.contains("contract")&&e.remove("contract")}});</script>
</dom-module>
</div><dom-module id="show-set">
  <template>
    <style include="shared-styles">:host{display:block;}iron-image.top{height:300px;width:400px;}neon-animated-pages{height:100%;}</style>
    <iron-ajax id="theAjax" url="https://rebrickable.com/api/get_set" params="{{_params}}" handle-as="json" last-response="{{_data}}"></iron-ajax>
    <iron-ajax id="theAjaxSetUserSet" method="POST" url="https://rebrickable.com/api/set_user_set" content-type="application/x-www-form-urlencoded" handle-as="text" on-response="_onSetUserSetResponse"></iron-ajax>

    <paper-toast id="toast">
    </paper-toast>
    <question-dialog id="_questionRemove" on-dialog-closed="_onRemoveDialogClosed">
      Do you want to remove set <b>{{_data.0.set_id}} {{_data.0.descr}}</b> from list <b>{{setListName}}</b>?
    </question-dialog>

    <paper-material elevation="1">
      <paper-tabs id="tabs" selected="{{_selectedTab}}">
        <paper-tab>Details</paper-tab>
        <paper-tab>Parts</paper-tab>
      </paper-tabs>
      <iron-pages selected="{{_selectedTab}}" entry-animation="fade-in-animation" exit-animation="fade-out-animation">
        <section>
          <div style$="min-height: {{_height}}px">
            <div class="horiztop">
              <div class="aleft">
                <div class="title">{{_data.0.set_id}} {{_data.0.descr}}</div>
                <div>&nbsp; </div>
                <table class="info">
                  <tbody><tr id="rowTheme">
                    <td>Theme:</td>
                    <td>{{_data.0.theme}}</td>
                  </tr>
                  <tr id="rowPieces">
                    <td>Pieces:</td>
                    <td>{{_data.0.pieces}}</td>
                  </tr>
                  <tr id="rowYear">
                    <td>Year:</td>
                    <td>{{_data.0.year}}</td>
                  </tr>
                  <tr id="rowListName">
                    <td>List:</td>
                    <td>{{setListName}}</td>
                  </tr>
                </tbody></table>
              </div>
              <paper-fab style="position:absolute; bottom: 30px; right:24px" icon="icons:delete" on-click="_onRemoveClick"></paper-fab>
            </div>
            <div class="acenter">
              <iron-image class="top" sizing="contain" src="{{_data.0.img_big}}"></iron-image>
            </div>
          </div>
        </section>
        <section>
          <show-set-parts user-hash="{{userHash}}" set-id="{{_showSetId}}" table-height="{{_height}}"></show-set-parts>
        </section>
      </iron-pages>
    </paper-material>

  </template>
  <script>!function(){"use strict";Polymer({is:"show-set",properties:{setId:{type:String,observer:"_onHashChanged"},userHash:{type:String,observer:"_onHashChanged"},route:{type:Object,notify:!0,value:{}},tabsToShow:{type:Object,notify:!0},showing:{type:Boolean,value:!1,observer:"_onShowingChanged"},setListId:{type:Number},setListName:{type:String},_data:{type:Array},_showSetId:{type:Number},_params:{type:Object},_selectedTab:{type:Number,value:0},_height:{type:Number,value:400}},attached:function(){this.async(this._resizeTable),window.addEventListener("resize",function(){this.debounce("parts-resize",this._resizeTable,1e3)}.bind(this))},_resizeTable:function(){var e=document.getElementById("paperDrawerPanel"),t=document.getElementById("appHeader");e&&t&&this.set("_height",e.clientHeight-t.clientHeight-150-this.$.tabs.clientHeight)},_onShowingChanged:function(){this.showing&&this.set("tabsToShow.tabs",[]),this.$.theAjax.auto=this.showing},_onHashChanged:function(){this.userHash&&this.setId&&(this.set("_data",{}),this.set("_params",{key:"p4GLMlcPxJ",set_id:this.setId,format:"json"}),this.set("_showSetId",this.setId))},_onRemoveClick:function(){this.$._questionRemove.open()},_onRemoveDialogClosed:function(e){e.detail.confirmed&&(this.$.theAjaxSetUserSet.body={key:"p4GLMlcPxJ",hash:this.userHash,format:"json",set:this.setId,qty:0,setlist_id:this.setListId},this.$.theAjaxSetUserSet.generateRequest())},_onSetUserSetResponse:function(e){XP.startsWith(e.detail.response,"SUCCESS")?this.set("route.path","/app/sets/"+this.setListId):(this.$.toast.text="Failed to remove set!",this.$.toast.open()),this.fire("removed")}})}();</script>
</dom-module>
</body></html>