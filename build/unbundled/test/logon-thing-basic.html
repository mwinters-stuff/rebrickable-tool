<!DOCTYPE html><html><head>
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">
  <title>logon-thing</title>

  <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../bower_components/web-component-tester/browser.js"></script>
  <script src="../bower_components/iron-test-helpers/mock-interactions.js"></script>
  <link rel="import" href="../bower_components/iron-test-helpers/iron-test-helpers.html">

  
  <link rel="import" href="../src/logon-thing/logon-thing.html">

</head>
<body>

<test-fixture id="basic">
  <template>
    <logon-thing></logon-thing>
  </template>
</test-fixture>

<script>describe("logon-thing tests",function(){var e,o,t;beforeEach(function(){console.log("setup"),e=fixture("basic"),o=sinon.fakeServer.create(),o.respondWith("https://rebrickable.com/api/get_user_hash?key=p4GLMlcPxJ&email=joe%40bob.com&pass=secret&format=json",[200,{"Content-Type":"application/text"},"12345678901234567890"]),o.respondWith("https://rebrickable.com/api/get_user_hash?key=p4GLMlcPxJ&email=jack%40bob.com&pass=sec&format=json",[200,{"Content-Type":"application/text"},"INVALIDUSERPASS"]);var t=e.$$("#cookie");expect(t).to.be.ok,t.eraseCookie(),o.respondImmediately=!0}),afterEach(function(){e.removeEventListener("authorized",t),e.removeEventListener("auth-failed",t),o.restore()}),it("use saved login",function(o){t=function(){console.log("listener - cookie"),expect(e.userHash).to.be.ok,expect(e.userHash).to.equal("12345678901234567890"),expect(e.$.cookie.readCookie()).to.equal("12345678901234567890"),o()},e.addEventListener("authorized",t);var a=e.$$("#cookie");expect(a).to.be.ok,a.value="12345678901234567890",a.createCookie()}),it("logon success",function(o){e.userHash="",t=function(){console.log("listener - success"),expect(e.userHash).to.be.ok,expect(e.userHash).to.equal("12345678901234567890"),o()},e.addEventListener("authorized",t);var a=e.$$("#username");expect(a).to.be.ok;var s=e.$$("#password");expect(s).to.be.ok;var c=e.$$("#doit");expect(c).to.be.ok,a.value="joe@bob.com",s.value="secret",flush(function(){MockInteractions.tap(c)})}),it("invalid username pass",function(o){e.userHash="",t=function(){o()},e.addEventListener("auth-failed",t);var a=e.$$("#username");expect(a).to.be.ok;var s=e.$$("#password");expect(s).to.be.ok;var c=e.$$("#doit");expect(c).to.be.ok,a.value="jack@bob.com",s.value="sec",flush(function(){MockInteractions.tap(c)})}),it("save login",function(o){t=function(){console.log("listener - save"),expect(e.userHash).to.be.ok,expect(e.userHash).to.equal("12345678901234567890"),expect(e.$.cookie.readCookie()).to.equal("12345678901234567890"),o()},e.addEventListener("authorized",t),e.userHash="";var a=e.$$("#username");expect(a).to.be.ok;var s=e.$$("#password");expect(s).to.be.ok;var c=e.$$("#savelogin");expect(c).to.be.ok,expect(c.checked).to.be["false"];var n=e.$$("#doit");expect(n).to.be.ok,a.value="joe@bob.com",s.value="secret",c.checked=!0,flush(function(){MockInteractions.tap(n)})})});</script>



</body></html>